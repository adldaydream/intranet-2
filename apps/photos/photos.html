<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Daydream Adelaide – Photo Gallery</title>
  <link rel="stylesheet" href="photos.css">
</head>
<body>
  <div id="login-screen" style="text-align:center; margin-top:50px;">
    <h1>Daydream Adelaide – Photo Gallery</h1>
    <p>This page is restricted. Please log in to view the photos.</p>
    <button id="login-btn">Login with Keycloak</button>
  </div>

  <div id="content" style="display:none; max-width:900px; margin:32px auto;">
    <h1>Daydream Adelaide – Photo Gallery</h1>
    <p>Welcome, guest!</p>
    <div class="widget">
      <h2>Event Photos</h2>
      <div id="gallery"></div>
    </div>
  </div>

  <script>
    const loginBtn = document.getElementById("login-btn");
    const loginScreen = document.getElementById("login-screen");
    const content = document.getElementById("content");

    loginBtn.addEventListener("click", () => {
      // Redirect to Keycloak login page (soft login)
      const keycloakLoginUrl = "https://lemur-6.cloud-iam.com/auth/realms/daydreamadl/protocol/openid-connect/auth" +
        "?client_id=intranet" +
        "&redirect_uri=" + encodeURIComponent(window.location.href) +
        "&response_type=code" +
        "&scope=openid";

      window.location.href = keycloakLoginUrl;
    });

    // Optional: check if redirected back from Keycloak with code
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.has('code')) {
      // Soft unlock the page after redirect
      loginScreen.style.display = "none";
      content.style.display = "block";
    }
  </script>

  <script src="photos.js"></script>
</body>
</html>
